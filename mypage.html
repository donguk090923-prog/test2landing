<!DOCTYPE html>
<html class="light" lang="ko">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>마이페이지 | 아울도어</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Epilogue:wght@400;500;700;900&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#496039",
                        "background-light": "#f7f7f6",
                        "background-dark": "#191c16",
                        "accent-brass": "#b29d71"
                    },
                    fontFamily: {
                        "display": ["Epilogue", "Noto Sans KR", "sans-serif"]
                    },
                },
            },
        }
    </script>
    <style>
        html {
            scroll-behavior: smooth;
        }
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        body {
            font-family: 'Epilogue', 'Noto Sans KR', sans-serif;
        }
        .tab-btn.active {
            color: #496039;
            border-bottom: 2px solid #496039;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-[#141612] dark:text-stone-50">
<!-- Navigation -->
<header class="sticky top-0 z-50 w-full border-b border-[#edefeb] bg-background-light/80 backdrop-blur-md dark:border-stone-800 dark:bg-background-dark/80">
    <div class="mx-auto flex max-w-[1280px] items-center justify-between px-6 py-4 lg:px-12">
        <a href="index.html" class="flex items-center gap-2">
            <div class="text-primary">
                <svg class="size-8" fill="currentColor" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <path d="M44 4H30.6666V17.3334H17.3334V30.6666H4V44H44V4Z"></path>
                </svg>
            </div>
            <h1 class="text-xl font-black tracking-tight text-primary">아울도어</h1>
        </a>
        <nav class="hidden items-center gap-8 md:flex">
            <a class="text-sm font-medium hover:text-primary transition-colors" href="index.html#service">서비스소개</a>
            <a class="text-sm font-medium hover:text-primary transition-colors" href="products.html">상품소개</a>
            <a class="text-sm font-medium hover:text-primary transition-colors" href="index.html#portfolio">시공사례</a>
            <a class="text-sm font-medium hover:text-primary transition-colors" href="index.html#news-section">뉴스</a>
        </nav>
        <div class="flex items-center gap-3">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center">
                    <span class="material-symbols-outlined text-primary text-sm">person</span>
                </div>
                <span id="header-username" class="text-sm font-medium">로딩중...</span>
            </div>
            <a href="#" id="logout-btn" class="text-sm text-gray-500 hover:text-primary transition-colors">로그아웃</a>
        </div>
    </div>
</header>

<main class="mx-auto max-w-[1280px] px-6 py-12 lg:px-12">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- Sidebar -->
        <aside class="lg:col-span-1">
            <!-- Profile Card -->
            <div class="bg-white rounded-2xl p-6 shadow-sm border border-[#edefeb] mb-6">
                <div class="text-center">
                    <div class="w-20 h-20 mx-auto rounded-full bg-primary/10 flex items-center justify-center mb-4">
                        <span class="material-symbols-outlined text-primary text-4xl">person</span>
                    </div>
                    <h2 id="profile-name" class="text-xl font-bold">로딩중...</h2>
                    <p id="profile-email" class="text-sm text-gray-500 mt-1">-</p>
                    <div class="mt-4 flex items-center justify-center gap-2">
                        <span class="px-3 py-1 text-xs font-medium rounded-full bg-primary/10 text-primary">VIP 회원</span>
                    </div>
                </div>
                <div class="mt-6 pt-6 border-t border-gray-100">
                    <div class="flex items-center justify-between text-sm">
                        <span class="text-gray-500">적립 포인트</span>
                        <span id="user-points" class="font-bold text-primary">0P</span>
                    </div>
                    <div class="flex items-center justify-between text-sm mt-3">
                        <span class="text-gray-500">쿠폰</span>
                        <span id="user-coupons" class="font-bold">0장</span>
                    </div>
                </div>
            </div>

            <!-- Menu -->
            <nav class="bg-white rounded-2xl shadow-sm border border-[#edefeb] overflow-hidden">
                <a href="#orders" class="mypage-menu flex items-center gap-3 px-6 py-4 text-sm font-medium hover:bg-gray-50 border-l-3 border-transparent hover:border-primary transition-all">
                    <span class="material-symbols-outlined text-xl text-gray-400">shopping_bag</span>
                    주문 내역
                </a>
                <a href="#construction" class="mypage-menu flex items-center gap-3 px-6 py-4 text-sm font-medium hover:bg-gray-50 border-l-3 border-transparent hover:border-primary transition-all">
                    <span class="material-symbols-outlined text-xl text-gray-400">construction</span>
                    시공 현황
                </a>
                <a href="#inquiries" class="mypage-menu flex items-center gap-3 px-6 py-4 text-sm font-medium hover:bg-gray-50 border-l-3 border-transparent hover:border-primary transition-all">
                    <span class="material-symbols-outlined text-xl text-gray-400">chat</span>
                    상담 문의
                </a>
                <a href="#reviews" class="mypage-menu flex items-center gap-3 px-6 py-4 text-sm font-medium hover:bg-gray-50 border-l-3 border-transparent hover:border-primary transition-all">
                    <span class="material-symbols-outlined text-xl text-gray-400">rate_review</span>
                    내 리뷰
                </a>
                <a href="#profile" class="mypage-menu flex items-center gap-3 px-6 py-4 text-sm font-medium hover:bg-gray-50 border-l-3 border-transparent hover:border-primary transition-all">
                    <span class="material-symbols-outlined text-xl text-gray-400">settings</span>
                    회원정보 수정
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="lg:col-span-3">
            <!-- Quick Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="bg-white rounded-xl p-4 shadow-sm border border-[#edefeb] text-center">
                    <p id="stat-total" class="text-3xl font-black text-primary">0</p>
                    <p class="text-xs text-gray-500 mt-1">총 주문</p>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm border border-[#edefeb] text-center">
                    <p id="stat-progress" class="text-3xl font-black text-blue-500">0</p>
                    <p class="text-xs text-gray-500 mt-1">진행중</p>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm border border-[#edefeb] text-center">
                    <p id="stat-completed" class="text-3xl font-black text-green-500">0</p>
                    <p class="text-xs text-gray-500 mt-1">완료</p>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm border border-[#edefeb] text-center">
                    <p id="stat-reviews" class="text-3xl font-black text-accent-brass">0</p>
                    <p class="text-xs text-gray-500 mt-1">리뷰 작성</p>
                </div>
            </div>

            <!-- Orders Section -->
            <section id="orders" class="bg-white rounded-2xl shadow-sm border border-[#edefeb] mb-8">
                <div class="p-6 border-b border-gray-100">
                    <div class="flex items-center justify-between">
                        <h2 class="text-lg font-bold">주문 내역</h2>
                        <a href="#" class="text-sm text-primary font-medium hover:underline">전체 보기</a>
                    </div>
                </div>
                <div class="divide-y divide-gray-100">
                    <!-- Order Item 1 -->
                    <div class="p-6">
                        <div class="flex items-start gap-4">
                            <div class="w-24 h-24 rounded-lg bg-cover bg-center flex-shrink-0" style="background-image: url('https://images.unsplash.com/photo-1506452305024-9d3f02d1c9b5?w=200&h=200&fit=crop');"></div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <p class="text-xs text-gray-400">2024.01.15 주문</p>
                                        <h3 class="font-bold mt-1">프리미엄 현관문 시그니처</h3>
                                        <p class="text-sm text-gray-500 mt-1">색상: 월넛 브라운 / 사이즈: 표준</p>
                                    </div>
                                    <span class="px-3 py-1 text-xs font-medium rounded-full bg-blue-50 text-blue-600 flex-shrink-0">시공 예정</span>
                                </div>
                                <div class="flex items-center justify-between mt-4">
                                    <p class="text-lg font-bold text-primary">1,500,000원</p>
                                    <div class="flex items-center gap-2">
                                        <button class="px-4 py-2 text-xs font-medium rounded-lg border border-gray-200 hover:border-primary hover:text-primary transition-all">상세보기</button>
                                        <button class="px-4 py-2 text-xs font-medium rounded-lg bg-primary text-white hover:bg-opacity-90 transition-all">시공 일정 확인</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Order Item 2 -->
                    <div class="p-6">
                        <div class="flex items-start gap-4">
                            <div class="w-24 h-24 rounded-lg bg-cover bg-center flex-shrink-0" style="background-image: url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=200&h=200&fit=crop');"></div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <p class="text-xs text-gray-400">2023.12.20 주문</p>
                                        <h3 class="font-bold mt-1">3연동 중문 프리미엄</h3>
                                        <p class="text-sm text-gray-500 mt-1">색상: 화이트 오크 / 유리: 투명</p>
                                    </div>
                                    <span class="px-3 py-1 text-xs font-medium rounded-full bg-green-50 text-green-600 flex-shrink-0">시공 완료</span>
                                </div>
                                <div class="flex items-center justify-between mt-4">
                                    <p class="text-lg font-bold text-primary">850,000원</p>
                                    <div class="flex items-center gap-2">
                                        <button class="px-4 py-2 text-xs font-medium rounded-lg border border-gray-200 hover:border-primary hover:text-primary transition-all">상세보기</button>
                                        <button class="px-4 py-2 text-xs font-medium rounded-lg border border-accent-brass text-accent-brass hover:bg-accent-brass hover:text-white transition-all">리뷰 작성</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Order Item 3 -->
                    <div class="p-6">
                        <div class="flex items-start gap-4">
                            <div class="w-24 h-24 rounded-lg bg-cover bg-center flex-shrink-0" style="background-image: url('https://images.unsplash.com/photo-1563453392212-326f5e854473?w=200&h=200&fit=crop');"></div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <p class="text-xs text-gray-400">2023.11.05 주문</p>
                                        <h3 class="font-bold mt-1">스마트 도어락 프리미엄</h3>
                                        <p class="text-sm text-gray-500 mt-1">색상: 블랙 / 기능: 지문+비밀번호+앱</p>
                                    </div>
                                    <span class="px-3 py-1 text-xs font-medium rounded-full bg-green-50 text-green-600 flex-shrink-0">설치 완료</span>
                                </div>
                                <div class="flex items-center justify-between mt-4">
                                    <p class="text-lg font-bold text-primary">450,000원</p>
                                    <div class="flex items-center gap-2">
                                        <button class="px-4 py-2 text-xs font-medium rounded-lg border border-gray-200 hover:border-primary hover:text-primary transition-all">상세보기</button>
                                        <span class="px-4 py-2 text-xs font-medium text-gray-400">리뷰 작성 완료</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Construction Progress Section -->
            <section id="construction" class="bg-white rounded-2xl shadow-sm border border-[#edefeb] mb-8">
                <div class="p-6 border-b border-gray-100">
                    <h2 class="text-lg font-bold">시공 진행 현황</h2>
                </div>
                <div class="p-6">
                    <div class="relative">
                        <!-- Progress Timeline -->
                        <div class="flex items-center justify-between mb-8">
                            <div class="flex flex-col items-center">
                                <div class="w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white">
                                    <span class="material-symbols-outlined text-lg">check</span>
                                </div>
                                <p class="text-xs font-medium mt-2">주문 완료</p>
                                <p class="text-xs text-gray-400">01/15</p>
                            </div>
                            <div class="flex-1 h-1 bg-green-500 mx-2"></div>
                            <div class="flex flex-col items-center">
                                <div class="w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white">
                                    <span class="material-symbols-outlined text-lg">check</span>
                                </div>
                                <p class="text-xs font-medium mt-2">결제 완료</p>
                                <p class="text-xs text-gray-400">01/15</p>
                            </div>
                            <div class="flex-1 h-1 bg-green-500 mx-2"></div>
                            <div class="flex flex-col items-center">
                                <div class="w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white">
                                    <span class="material-symbols-outlined text-lg">check</span>
                                </div>
                                <p class="text-xs font-medium mt-2">실측 완료</p>
                                <p class="text-xs text-gray-400">01/17</p>
                            </div>
                            <div class="flex-1 h-1 bg-blue-500 mx-2 animate-pulse"></div>
                            <div class="flex flex-col items-center">
                                <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white">
                                    <span class="material-symbols-outlined text-lg">schedule</span>
                                </div>
                                <p class="text-xs font-medium mt-2 text-blue-600">시공 예정</p>
                                <p class="text-xs text-gray-400">01/22</p>
                            </div>
                            <div class="flex-1 h-1 bg-gray-200 mx-2"></div>
                            <div class="flex flex-col items-center">
                                <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-400">
                                    <span class="material-symbols-outlined text-lg">flag</span>
                                </div>
                                <p class="text-xs font-medium mt-2 text-gray-400">시공 완료</p>
                                <p class="text-xs text-gray-400">-</p>
                            </div>
                        </div>

                        <!-- Current Status Card -->
                        <div class="bg-blue-50 rounded-xl p-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-lg bg-blue-500 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-white text-2xl">engineering</span>
                                </div>
                                <div>
                                    <h4 class="font-bold text-blue-700">시공 예정일: 2024년 1월 22일 (월)</h4>
                                    <p class="text-sm text-blue-600 mt-1">담당 기술자: 김기술 / 연락처: 010-1234-5678</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Inquiries Section -->
            <section id="inquiries" class="bg-white rounded-2xl shadow-sm border border-[#edefeb] mb-8">
                <div class="p-6 border-b border-gray-100">
                    <div class="flex items-center justify-between">
                        <h2 class="text-lg font-bold">상담 문의</h2>
                        <button class="px-4 py-2 text-sm font-medium rounded-lg bg-primary text-white hover:bg-opacity-90 transition-all">
                            새 문의 작성
                        </button>
                    </div>
                </div>
                <div class="divide-y divide-gray-100">
                    <div class="p-6 flex items-center justify-between">
                        <div>
                            <div class="flex items-center gap-2">
                                <span class="px-2 py-0.5 text-xs font-medium rounded bg-green-50 text-green-600">답변완료</span>
                                <h4 class="font-medium">중문 색상 변경 문의드립니다</h4>
                            </div>
                            <p class="text-sm text-gray-500 mt-1">2024.01.10</p>
                        </div>
                        <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                    </div>
                    <div class="p-6 flex items-center justify-between">
                        <div>
                            <div class="flex items-center gap-2">
                                <span class="px-2 py-0.5 text-xs font-medium rounded bg-yellow-50 text-yellow-600">답변대기</span>
                                <h4 class="font-medium">시공 일정 변경이 가능한가요?</h4>
                            </div>
                            <p class="text-sm text-gray-500 mt-1">2024.01.16</p>
                        </div>
                        <span class="material-symbols-outlined text-gray-400">chevron_right</span>
                    </div>
                </div>
            </section>

            <!-- Profile Edit Section -->
            <section id="profile" class="bg-white rounded-2xl shadow-sm border border-[#edefeb]">
                <div class="p-6 border-b border-gray-100">
                    <h2 class="text-lg font-bold">회원정보 수정</h2>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="text-xs font-bold uppercase tracking-wider text-gray-500">이름</label>
                            <input type="text" value="홍길동" class="mt-2 w-full rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"/>
                        </div>
                        <div>
                            <label class="text-xs font-bold uppercase tracking-wider text-gray-500">이메일</label>
                            <input type="email" value="hong@example.com" class="mt-2 w-full rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm outline-none focus:border-primary focus:ring-2 focus:ring-primary/20" disabled/>
                        </div>
                        <div>
                            <label class="text-xs font-bold uppercase tracking-wider text-gray-500">연락처</label>
                            <input type="tel" value="010-1234-5678" class="mt-2 w-full rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"/>
                        </div>
                        <div>
                            <label class="text-xs font-bold uppercase tracking-wider text-gray-500">생년월일</label>
                            <input type="date" value="1990-01-01" class="mt-2 w-full rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"/>
                        </div>
                        <div class="md:col-span-2">
                            <label class="text-xs font-bold uppercase tracking-wider text-gray-500">주소</label>
                            <div class="flex gap-2 mt-2">
                                <input type="text" value="06241" class="w-24 rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm outline-none focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="우편번호"/>
                                <button class="px-4 py-3 text-sm font-medium rounded-lg border border-primary text-primary hover:bg-primary hover:text-white transition-all">주소 검색</button>
                            </div>
                            <input type="text" value="서울특별시 강남구 테헤란로 123" class="mt-2 w-full rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"/>
                            <input type="text" value="도어엑스퍼트 아파트 101동 1001호" class="mt-2 w-full rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm outline-none focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="상세주소"/>
                        </div>
                    </div>

                    <div class="mt-8 pt-6 border-t border-gray-100">
                        <h3 class="font-bold mb-4">비밀번호 변경</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="text-xs font-bold uppercase tracking-wider text-gray-500">현재 비밀번호</label>
                                <input type="password" class="mt-2 w-full rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm outline-none focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="현재 비밀번호 입력"/>
                            </div>
                            <div></div>
                            <div>
                                <label class="text-xs font-bold uppercase tracking-wider text-gray-500">새 비밀번호</label>
                                <input type="password" class="mt-2 w-full rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm outline-none focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="새 비밀번호 입력"/>
                            </div>
                            <div>
                                <label class="text-xs font-bold uppercase tracking-wider text-gray-500">새 비밀번호 확인</label>
                                <input type="password" class="mt-2 w-full rounded-lg border border-gray-200 bg-gray-50 px-4 py-3 text-sm outline-none focus:border-primary focus:ring-2 focus:ring-primary/20" placeholder="새 비밀번호 재입력"/>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 flex items-center justify-between">
                        <button class="text-sm text-red-500 hover:underline">회원 탈퇴</button>
                        <div class="flex items-center gap-3">
                            <button class="px-6 py-3 text-sm font-medium rounded-lg border border-gray-200 hover:border-primary hover:text-primary transition-all">취소</button>
                            <button class="px-6 py-3 text-sm font-medium rounded-lg bg-primary text-white hover:bg-opacity-90 transition-all">저장하기</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</main>

<!-- Footer -->
<footer class="bg-stone-100 py-12 px-6 lg:px-12 dark:bg-stone-950 mt-12">
    <div class="mx-auto max-w-[1280px]">
        <div class="flex flex-col md:flex-row items-center justify-between gap-6">
            <div class="flex items-center gap-2">
                <div class="text-primary">
                    <svg class="size-6" fill="currentColor" viewbox="0 0 48 48">
                        <path d="M44 4H30.6666V17.3334H17.3334V30.6666H4V44H44V4Z"></path>
                    </svg>
                </div>
                <h2 class="text-lg font-black tracking-tight text-primary">아울도어</h2>
            </div>
            <p class="text-sm text-gray-500">© 2024 아울도어 Inc. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Configuration -->
<script src="config.js"></script>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
<!-- Firebase Config -->
<script src="firebase-config.js"></script>

<script>
// 로그인 상태 확인 및 마이페이지 데이터 로드
auth.onAuthStateChanged(async (user) => {
    if (!user) {
        // 로그인 안 된 상태면 메인 페이지로 리다이렉트
        alert('로그인이 필요합니다.');
        window.location.href = 'index.html';
        return;
    }

    // 사용자 정보 표시
    const userName = user.displayName || user.email.split('@')[0];
    const userEmail = user.email;

    // 헤더의 사용자명
    document.getElementById('header-username').textContent = userName + '님';

    // 프로필 카드
    document.getElementById('profile-name').textContent = userName;
    document.getElementById('profile-email').textContent = userEmail;

    // Firestore에서 사용자 데이터 가져오기
    try {
        const userDoc = await db.collection('users').doc(user.uid).get();
        if (userDoc.exists) {
            const userData = userDoc.data();
            // 포인트 표시
            if (userData.points !== undefined) {
                document.getElementById('user-points').textContent = userData.points.toLocaleString() + 'P';
            }
            // 쿠폰 표시
            if (userData.coupons && userData.coupons.length > 0) {
                document.getElementById('user-coupons').textContent = userData.coupons.length + '장';
            }
        }

        // 주문 목록 가져오기
        const ordersResult = await getUserOrders(user.uid);
        if (ordersResult.success) {
            updateOrdersDisplay(ordersResult.orders);
        }
    } catch (error) {
        console.error('사용자 데이터 로드 실패:', error);
    }
});

// 주문 목록 표시 업데이트
function updateOrdersDisplay(orders) {
    const totalOrders = orders.length;
    const inProgress = orders.filter(o => ['pending', 'paid', 'confirmed'].includes(o.status)).length;
    const completed = orders.filter(o => o.status === 'completed').length;

    // 통계 업데이트
    document.getElementById('stat-total').textContent = totalOrders;
    document.getElementById('stat-progress').textContent = inProgress;
    document.getElementById('stat-completed').textContent = completed;
}

// 로그아웃 버튼
document.getElementById('logout-btn').addEventListener('click', async (e) => {
    e.preventDefault();
    const result = await signOut();
    if (result.success) {
        alert('로그아웃 되었습니다.');
        window.location.href = 'index.html';
    }
});
</script>
</body>
</html>
